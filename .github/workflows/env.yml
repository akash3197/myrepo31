name: CI/CD Pipeline for Master Branch

on:
  push:
    branches:
      - main

jobs:
  dev-environment:
    runs-on: ubuntu-latest
    environment: dev
    name: Print Hello World from Development
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Print Hello World from Dev
        run: echo "Hello World from Development environment"
        env:
          ENV_NAME: ${{ secrets.ENV_NAME }}

  
  prod-environment:
    env: 
      ARTIFACTORY_USERNAME: ${{ secrets.NAME }}
    runs-on: ubuntu-latest
    environment: prod
    name: Print Hello World from Production
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Print Hello World from Production
        run: | 
              echo "Hello World from Production environment"
              FIRST_FIVE=$(echo "prefix-${ARTIFACTORY_USERNAME}")
              echo "First 5 chars encoded: $FIRST_FIVE"
        env:
          ENV_NAME: ${{ secrets.ENV_NAME }}
